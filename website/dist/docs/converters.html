<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><!-- Primary meta --><title>Custom Converters ‚Äì BLite</title><meta name="description" content="Register custom BSON type converters in BLite to control exactly how your domain types are serialized and deserialized without allocations."><meta name="keywords" content="embedded NoSQL database for .NET, embedded NoSQL .NET, NoSQL database C#, embedded document database .NET, BSON document store, embedded database .NET, zero allocation .NET database, ACID transactions .NET, LiteDB alternative, local-first database .NET, .NET 10 database, NoSQL NuGet package, embedded database NuGet, document store C#, BLite"><meta name="author" content="BLite Project"><meta name="robots" content="index, follow"><meta name="theme-color" content="#e74c3c"><link rel="canonical" href="https://blitedb.com/docs/converters"><!-- Favicon --><link rel="icon" type="image/svg+xml" href="/icon.svg"><!-- Open Graph --><meta property="og:type" content="website"><meta property="og:site_name" content="BLite"><meta property="og:url" content="https://blitedb.com/docs/converters"><meta property="og:title" content="Custom Converters ‚Äì BLite"><meta property="og:description" content="Register custom BSON type converters in BLite to control exactly how your domain types are serialized and deserialized without allocations."><meta property="og:image" content="https://blitedb.com/og-image.png"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Custom Converters ‚Äì BLite"><meta name="twitter:description" content="Register custom BSON type converters in BLite to control exactly how your domain types are serialized and deserialized without allocations."><meta name="twitter:image" content="https://blitedb.com/og-image.png"><!-- JSON-LD Structured Data --><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "BLite",
    "alternateName": "BLite Embedded NoSQL Database",
    "url": "https://blitedb.com",
    "description": "BLite is the high-performance embedded NoSQL database for .NET. Zero-allocation BSON document store with ACID transactions, Change Data Capture streams, R-Tree spatial indexing, and compile-time source generators. No cloud, no server ‚Äî install via NuGet.",
    "applicationCategory": "DeveloperApplication",
    "applicationSubCategory": "Embedded NoSQL Database",
    "operatingSystem": "Windows, Linux, macOS",
    "programmingLanguage": "C#",
    "softwareVersion": "1.9.0",
    "license": "https://opensource.org/licenses/MIT",
    "codeRepository": "https://github.com/EntglDb/BLite",
    "downloadUrl": "https://www.nuget.org/packages/BLite",
    "featureList": [
      "Embedded NoSQL document store for .NET",
      "Zero-allocation BSON serialization",
      "ACID transactions with Write-Ahead Logging",
      "Change Data Capture (CDC) with 1000+ subscribers",
      "R-Tree spatial and vector indexing",
      "Compile-time source generators ‚Äî no reflection",
      "LINQ IQueryable provider",
      "Schema-less DynamicCollection API",
      "BLQL query language",
      "Local-first, no cloud required"
    ],
    "keywords": "embedded NoSQL database for .NET, embedded database .NET, BSON document store, NoSQL C#, ACID .NET, zero allocation, LiteDB alternative",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }</script><!-- FAQ Structured Data --><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is BLite?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "BLite is a high-performance embedded NoSQL database for .NET. It stores BSON documents locally inside your application with zero allocations, ACID transactions, and no external server or cloud dependency."
        }
      },
      {
        "@type": "Question",
        "name": "How do I install BLite in a .NET project?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Run 'dotnet add package BLite' in your .NET project. BLite targets .NET 10 and is available on NuGet."
        }
      },
      {
        "@type": "Question",
        "name": "Is BLite a good alternative to LiteDB for .NET?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. BLite offers significantly higher throughput and zero heap allocations compared to LiteDB, plus modern features like Change Data Capture, R-Tree spatial indexing, and compile-time source generators."
        }
      },
      {
        "@type": "Question",
        "name": "Does BLite require a cloud service or external server?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. BLite is a fully embedded database that runs entirely inside your .NET process. There is no external server, no cloud service, and no network dependency."
        }
      }
    ]
  }</script><script type="module" async="" crossorigin="" src="/assets/app-BYPU4mKv.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-DyWslf59.css"></head><body><div id="app" data-server-rendered="true"><div class="app-layout" data-v-fb6af8ee=""><header class="main-header glass-panel" data-v-fb6af8ee=""><div class="container header-content" data-v-fb6af8ee=""><a href="/" class="logo-link" data-v-fb6af8ee=""><img src="/icon.svg" alt="BLite" class="logo-img" data-v-fb6af8ee=""><div class="logo-text" data-v-fb6af8ee="">BLite<span class="dot" data-v-fb6af8ee="">.</span></div></a><nav data-v-fb6af8ee=""><a href="/" class="" data-v-fb6af8ee="">Home</a><a href="/docs" class="router-link-active" data-v-fb6af8ee="">Docs</a><a href="/studio" class="" data-v-fb6af8ee="">Studio</a><a href="/comparisons" class="" data-v-fb6af8ee="">Comparisons</a><a href="https://github.com/EntglDb/BLite" target="_blank" class="github-link" data-v-fb6af8ee="">GitHub ‚Üó</a></nav></div></header><main data-v-fb6af8ee=""><div class="docs-layout" data-v-fb6af8ee="" data-v-0b425e15=""><aside class="docs-sidebar" data-v-0b425e15=""><div class="sidebar-header" data-v-0b425e15=""><h2 data-v-0b425e15="">Documentation</h2></div><nav class="sidebar-nav" data-v-0b425e15=""><!--[--><a href="/docs/getting-started" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üöÄ</span><span class="nav-label" data-v-0b425e15="">Getting Started</span></a><a href="/docs/installation" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üì¶</span><span class="nav-label" data-v-0b425e15="">Installation</span></a><a href="/docs/transactions" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üîÑ</span><span class="nav-label" data-v-0b425e15="">Transactions &amp; Async</span></a><a href="/docs/crud" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">‚úèÔ∏è</span><span class="nav-label" data-v-0b425e15="">CRUD Operations</span></a><a href="/docs/querying" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üîç</span><span class="nav-label" data-v-0b425e15="">Querying</span></a><a href="/docs/generators" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ü§ñ</span><span class="nav-label" data-v-0b425e15="">Source Generators</span></a><a href="/docs/cdc" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üì°</span><span class="nav-label" data-v-0b425e15="">Change Data Capture</span></a><a href="/docs/spatial" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üåç</span><span class="nav-label" data-v-0b425e15="">Spatial Indexing</span></a><a href="/docs/architecture" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üèóÔ∏è</span><span class="nav-label" data-v-0b425e15="">Architecture</span></a><a aria-current="page" href="/docs/converters" class="router-link-active router-link-exact-active active nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üÜî</span><span class="nav-label" data-v-0b425e15="">Custom ID Converters</span></a><a href="/docs/benchmarks" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">‚ö°</span><span class="nav-label" data-v-0b425e15="">Benchmarks</span></a><a href="/docs/dynamic-api" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üîå</span><span class="nav-label" data-v-0b425e15="">Schema-less API</span></a><a href="/docs/blql" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">üîé</span><span class="nav-label" data-v-0b425e15="">BLQL</span></a><!--]--></nav></aside><main class="docs-content" data-v-0b425e15=""><div class="container" data-v-0b425e15=""><div class="doc-page" data-v-0b425e15="" data-v-8a366943=""><header class="doc-header" data-v-8a366943=""><h1 data-v-8a366943="">üîÑ <span class="title-gradient" data-v-8a366943="">Converters</span></h1><p class="lead" data-v-8a366943="">BLite ships two complementary conversion systems: <strong data-v-8a366943="">Custom ID Converters</strong> for mapping ValueObjects to BSON storage types, and <strong data-v-8a366943="">BsonJsonConverter</strong> for translating between JSON and native BSON ‚Äî with zero extra dependencies.</p></header><section class="doc-section" data-v-8a366943=""><h2 data-v-8a366943="">Overview</h2><p data-v-8a366943="">BLite allows you to use strongly-typed identifiers (ValueObjects) for your entities while storing them as simple primitives (int, string, Guid, ObjectId) in the underlying BSON storage.</p><div class="info-box" data-v-8a366943=""><span class="icon" data-v-8a366943="">‚ÑπÔ∏è</span><p data-v-8a366943="">This feature leverages Source Generators to automatically handle conversion during serialization and deserialization, ensuring zero runtime overhead.</p></div></section><section class="doc-section" data-v-8a366943=""><h2 data-v-8a366943="">1. Define your ValueObject</h2><p data-v-8a366943="">Usually, a <code data-v-8a366943="">record</code> is the best choice for a ValueObject as it provides built-in equality and concise syntax.</p><pre data-v-8a366943=""><code data-v-8a366943="">public record OrderId(string Value);</code></pre></section><section class="doc-section" data-v-8a366943=""><h2 data-v-8a366943="">2. Implement ValueConverter</h2><p data-v-8a366943="">Create a converter by inheriting from <code data-v-8a366943="">ValueConverter&lt;TModel, TProvider&gt;</code>.</p><pre data-v-8a366943=""><code data-v-8a366943="">public class OrderIdConverter : ValueConverter&lt;OrderId, string&gt;
{
    public override string ConvertToProvider(OrderId model) =&gt; model.Value;
    public override OrderId ConvertFromProvider(string provider) =&gt; new OrderId(provider);
}</code></pre></section><section class="doc-section" data-v-8a366943=""><h2 data-v-8a366943="">3. Register the Converter</h2><p data-v-8a366943="">Use the Fluent API in your <code data-v-8a366943="">OnModelCreating</code> method to associate the converter with the entity property.</p><pre data-v-8a366943=""><code data-v-8a366943="">protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity&lt;Order&gt;()
        .Property(x =&gt; x.Id)
        .HasConversion&lt;OrderIdConverter&gt;();
}</code></pre></section><section class="doc-section" data-v-8a366943=""><h2 data-v-8a366943="">How it Works</h2><p data-v-8a366943="">The BLite Source Generator detects the <code data-v-8a366943="">HasConversion</code> call and generates a specialized mapper that:</p><ul data-v-8a366943=""><li data-v-8a366943="">Instantiates the <code data-v-8a366943="">OrderIdConverter</code> exactly once.</li><li data-v-8a366943="">Converts the <code data-v-8a366943="">OrderId</code> to <code data-v-8a366943="">string</code> before writing to BSON.</li><li data-v-8a366943="">Converts the <code data-v-8a366943="">string</code> back to <code data-v-8a366943="">OrderId</code> when reading from BSON.</li><li data-v-8a366943="">Optimizes index keys so you can query using the ValueObject directly.</li></ul></section><section class="doc-section" data-v-8a366943=""><h2 data-v-8a366943="">Usage Example</h2><pre data-v-8a366943=""><code data-v-8a366943="">var myOrderId = new OrderId("ORD-2024-001");

// Insert works naturally
db.Orders.Insert(new Order { Id = myOrderId, Customer = "Alice" });

// FindById uses the ValueObject type
var order = db.Orders.FindById(myOrderId);</code></pre></section><section class="doc-section" data-v-8a366943=""><h2 data-v-8a366943="">BsonJsonConverter <span style="font-size:.6em;vertical-align:middle;background:rgba(231,76,60,.15);color:var(--blite-red);padding:2px 8px;border-radius:12px;font-weight:600" data-v-8a366943="">v1.7.0</span></h2><p data-v-8a366943=""><code data-v-8a366943="">BsonJsonConverter</code> is a static utility in <code data-v-8a366943="">BLite.Bson</code> that converts between UTF-8 JSON and BLite's native BSON representation. It uses <strong data-v-8a366943=""><code data-v-8a366943="">System.Text.Json</code></strong> ‚Äî built into the .NET runtime ‚Äî so there are zero extra NuGet dependencies.</p><p data-v-8a366943="">It is especially useful in <strong data-v-8a366943="">schema-less / server mode</strong> (<code data-v-8a366943="">BLiteEngine</code> + <code data-v-8a366943="">DynamicCollection</code>) when you need to ingest JSON payloads or export documents as JSON.</p><h3 data-v-8a366943="">JSON ‚Üí BsonDocument</h3><pre data-v-8a366943=""><code data-v-8a366943="">using BLite.Bson;

using var engine = new BLiteEngine("data.db");
var col = engine.GetOrCreateCollection("events");

// Get the engine's shared field-name dictionaries
var (keyMap, reverseKeyMap) = engine.GetKeyMap();

string json = """
    {
        "_id": "507f1f77bcf86cd799439011",
        "type": "order_placed",
        "total": 199.99,
        "placedAt": "2026-02-23T10:00:00Z"
    }
    """;

BsonDocument doc = BsonJsonConverter.FromJson(json, keyMap, reverseKeyMap);
col.Insert(doc);</code></pre><h3 data-v-8a366943="">BsonDocument ‚Üí JSON</h3><pre data-v-8a366943=""><code data-v-8a366943="">BsonDocument? doc = col.FindById(id);

if (doc is not null)
{
    // Indented output (default)
    string json = BsonJsonConverter.ToJson(doc);

    // Compact (no indentation)
    string compact = BsonJsonConverter.ToJson(doc, indented: false);

    Console.WriteLine(json);
    // {
    //   "_id": "507f1f77bcf86cd799439011",
    //   "type": "order_placed",
    //   "total": 199.99,
    //   "placedAt": "2026-02-23T10:00:00Z"
    // }
}</code></pre><h3 data-v-8a366943="">Type Mapping</h3><table data-v-8a366943=""><thead data-v-8a366943=""><tr data-v-8a366943=""><th data-v-8a366943="">JSON</th><th data-v-8a366943="">BSON</th><th data-v-8a366943="">Notes</th></tr></thead><tbody data-v-8a366943=""><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">null</code></td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.Null</code></td><td data-v-8a366943=""></td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">true</code> / <code data-v-8a366943="">false</code></td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.Boolean</code></td><td data-v-8a366943=""></td></tr><tr data-v-8a366943=""><td data-v-8a366943="">number (fits int32)</td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.Int32</code></td><td data-v-8a366943=""></td></tr><tr data-v-8a366943=""><td data-v-8a366943="">number (fits int64)</td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.Int64</code></td><td data-v-8a366943=""></td></tr><tr data-v-8a366943=""><td data-v-8a366943="">number (fractional)</td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.Double</code></td><td data-v-8a366943=""></td></tr><tr data-v-8a366943=""><td data-v-8a366943="">string (ISO-8601)</td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.DateTime</code></td><td data-v-8a366943="">Auto-detected, stored as UTC</td></tr><tr data-v-8a366943=""><td data-v-8a366943="">string (UUID)</td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.Guid</code></td><td data-v-8a366943="">Standard <code data-v-8a366943="">D</code> format</td></tr><tr data-v-8a366943=""><td data-v-8a366943="">string</td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.String</code></td><td data-v-8a366943=""></td></tr><tr data-v-8a366943=""><td data-v-8a366943="">object <code data-v-8a366943="">{‚Ä¶}</code></td><td data-v-8a366943="">nested <code data-v-8a366943="">BsonDocument</code></td><td data-v-8a366943="">Shares engine key map</td></tr><tr data-v-8a366943=""><td data-v-8a366943="">array <code data-v-8a366943="">[‚Ä¶]</code></td><td data-v-8a366943=""><code data-v-8a366943="">BsonValue.Array</code></td><td data-v-8a366943=""></td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">"_id"</code> field</td><td data-v-8a366943=""><code data-v-8a366943="">BsonId</code></td><td data-v-8a366943="">24-hex ‚Üí ObjectId, int, long, Guid, or string fallback</td></tr></tbody></table><h3 data-v-8a366943="">Reverse Mapping (BSON ‚Üí JSON)</h3><table data-v-8a366943=""><thead data-v-8a366943=""><tr data-v-8a366943=""><th data-v-8a366943="">BSON</th><th data-v-8a366943="">JSON</th></tr></thead><tbody data-v-8a366943=""><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Null</code></td><td data-v-8a366943=""><code data-v-8a366943="">null</code></td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Boolean</code></td><td data-v-8a366943=""><code data-v-8a366943="">true</code> / <code data-v-8a366943="">false</code></td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Int32</code> / <code data-v-8a366943="">Int64</code> / <code data-v-8a366943="">Double</code> / <code data-v-8a366943="">Decimal</code></td><td data-v-8a366943="">number</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">String</code></td><td data-v-8a366943="">string</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">DateTime</code></td><td data-v-8a366943="">ISO-8601 string (<code data-v-8a366943="">"2026-02-23T10:00:00Z"</code>)</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Guid</code></td><td data-v-8a366943="">UUID string (<code data-v-8a366943="">"xxxxxxxx-xxxx-..."</code>)</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">ObjectId</code></td><td data-v-8a366943="">24-char lowercase hex string</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Timestamp</code></td><td data-v-8a366943="">number (Unix seconds)</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Binary</code></td><td data-v-8a366943="">base64 string</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Coordinates</code></td><td data-v-8a366943=""><code data-v-8a366943="">[lon, lat]</code> (GeoJSON order)</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Array</code></td><td data-v-8a366943="">JSON array</td></tr><tr data-v-8a366943=""><td data-v-8a366943=""><code data-v-8a366943="">Document</code></td><td data-v-8a366943="">JSON object</td></tr></tbody></table><div class="info-box" data-v-8a366943=""><span class="icon" data-v-8a366943="">üí°</span><p data-v-8a366943="">Both overloads of <code data-v-8a366943="">FromJson</code> accept a <code data-v-8a366943="">string</code> or a <code data-v-8a366943="">ReadOnlyMemory&lt;byte&gt;</code> UTF-8 buffer. The byte-buffer overload avoids an extra string allocation when reading directly from a network stream.</p></div></section></div></div></main></div></main><footer class="main-footer" data-v-fb6af8ee=""><div class="container footer-inner" data-v-fb6af8ee=""><div class="footer-col" data-v-fb6af8ee=""><p data-v-fb6af8ee="">¬© 2026 BLite Project. Open Source (MIT).</p><p class="tagline" data-v-fb6af8ee="">"Sky is Blite, no Clouds today."</p></div><div class="footer-col footer-downloads" data-v-fb6af8ee=""><p class="footer-dl-title" data-v-fb6af8ee="">‚¨á Download BLite Studio v1.9.0</p><div class="footer-dl-links" data-v-fb6af8ee=""><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-win-x64.msi" data-v-fb6af8ee="">ü™ü Windows MSI</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-win-x64-portable.zip" data-v-fb6af8ee="">ü™ü Windows Portable</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/blite-studio_1.9.0_amd64.deb" data-v-fb6af8ee="">üêß Linux .deb</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-linux-x64.tar.gz" data-v-fb6af8ee="">üêß Linux tar.gz</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-osx-arm64.dmg" data-v-fb6af8ee="">üçé macOS Apple Silicon</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-osx-x64.dmg" data-v-fb6af8ee="">üçé macOS Intel</a></div></div></div></footer></div></div></body></html>