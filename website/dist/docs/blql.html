<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><!-- Primary meta --><title>BLQL â€” BLite Query Language</title><meta name="description" content="BLQL is the MQL-inspired query language for DynamicCollection. Filter, sort, project, and page BsonDocument results using JSON strings or the fluent C# API. Built-in injection and ReDoS protection."><meta name="keywords" content="embedded NoSQL database for .NET, embedded NoSQL .NET, NoSQL database C#, embedded document database .NET, BSON document store, embedded database .NET, zero allocation .NET database, ACID transactions .NET, LiteDB alternative, local-first database .NET, .NET 10 database, NoSQL NuGet package, embedded database NuGet, document store C#, BLite"><meta name="author" content="BLite Project"><meta name="robots" content="index, follow"><meta name="theme-color" content="#e74c3c"><link rel="canonical" href="https://blitedb.com/docs/blql"><!-- Favicon --><link rel="icon" type="image/svg+xml" href="/icon.svg"><!-- Open Graph --><meta property="og:type" content="website"><meta property="og:site_name" content="BLite"><meta property="og:url" content="https://blitedb.com/docs/blql"><meta property="og:title" content="BLQL â€” BLite Query Language"><meta property="og:description" content="BLQL is the MQL-inspired query language for DynamicCollection. Filter, sort, project, and page BsonDocument results using JSON strings or the fluent C# API. Built-in injection and ReDoS protection."><meta property="og:image" content="https://blitedb.com/og-image.png"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="BLQL â€” BLite Query Language"><meta name="twitter:description" content="BLQL is the MQL-inspired query language for DynamicCollection. Filter, sort, project, and page BsonDocument results using JSON strings or the fluent C# API. Built-in injection and ReDoS protection."><meta name="twitter:image" content="https://blitedb.com/og-image.png"><!-- JSON-LD Structured Data --><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "BLite",
    "alternateName": "BLite Embedded NoSQL Database",
    "url": "https://blitedb.com",
    "description": "BLite is the high-performance embedded NoSQL database for .NET. Zero-allocation BSON document store with ACID transactions, Change Data Capture streams, R-Tree spatial indexing, and compile-time source generators. No cloud, no server â€” install via NuGet.",
    "applicationCategory": "DeveloperApplication",
    "applicationSubCategory": "Embedded NoSQL Database",
    "operatingSystem": "Windows, Linux, macOS",
    "programmingLanguage": "C#",
    "softwareVersion": "1.9.0",
    "license": "https://opensource.org/licenses/MIT",
    "codeRepository": "https://github.com/EntglDb/BLite",
    "downloadUrl": "https://www.nuget.org/packages/BLite",
    "featureList": [
      "Embedded NoSQL document store for .NET",
      "Zero-allocation BSON serialization",
      "ACID transactions with Write-Ahead Logging",
      "Change Data Capture (CDC) with 1000+ subscribers",
      "R-Tree spatial and vector indexing",
      "Compile-time source generators â€” no reflection",
      "LINQ IQueryable provider",
      "Schema-less DynamicCollection API",
      "BLQL query language",
      "Local-first, no cloud required"
    ],
    "keywords": "embedded NoSQL database for .NET, embedded database .NET, BSON document store, NoSQL C#, ACID .NET, zero allocation, LiteDB alternative",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }</script><!-- FAQ Structured Data --><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is BLite?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "BLite is a high-performance embedded NoSQL database for .NET. It stores BSON documents locally inside your application with zero allocations, ACID transactions, and no external server or cloud dependency."
        }
      },
      {
        "@type": "Question",
        "name": "How do I install BLite in a .NET project?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Run 'dotnet add package BLite' in your .NET project. BLite targets .NET 10 and is available on NuGet."
        }
      },
      {
        "@type": "Question",
        "name": "Is BLite a good alternative to LiteDB for .NET?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. BLite offers significantly higher throughput and zero heap allocations compared to LiteDB, plus modern features like Change Data Capture, R-Tree spatial indexing, and compile-time source generators."
        }
      },
      {
        "@type": "Question",
        "name": "Does BLite require a cloud service or external server?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. BLite is a fully embedded database that runs entirely inside your .NET process. There is no external server, no cloud service, and no network dependency."
        }
      }
    ]
  }</script><script type="module" async="" crossorigin="" src="/assets/app-BYPU4mKv.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-DyWslf59.css"></head><body><div id="app" data-server-rendered="true"><div class="app-layout" data-v-fb6af8ee=""><header class="main-header glass-panel" data-v-fb6af8ee=""><div class="container header-content" data-v-fb6af8ee=""><a href="/" class="logo-link" data-v-fb6af8ee=""><img src="/icon.svg" alt="BLite" class="logo-img" data-v-fb6af8ee=""><div class="logo-text" data-v-fb6af8ee="">BLite<span class="dot" data-v-fb6af8ee="">.</span></div></a><nav data-v-fb6af8ee=""><a href="/" class="" data-v-fb6af8ee="">Home</a><a href="/docs" class="router-link-active" data-v-fb6af8ee="">Docs</a><a href="/studio" class="" data-v-fb6af8ee="">Studio</a><a href="/comparisons" class="" data-v-fb6af8ee="">Comparisons</a><a href="https://github.com/EntglDb/BLite" target="_blank" class="github-link" data-v-fb6af8ee="">GitHub â†—</a></nav></div></header><main data-v-fb6af8ee=""><div class="docs-layout" data-v-fb6af8ee="" data-v-0b425e15=""><aside class="docs-sidebar" data-v-0b425e15=""><div class="sidebar-header" data-v-0b425e15=""><h2 data-v-0b425e15="">Documentation</h2></div><nav class="sidebar-nav" data-v-0b425e15=""><!--[--><a href="/docs/getting-started" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸš€</span><span class="nav-label" data-v-0b425e15="">Getting Started</span></a><a href="/docs/installation" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ“¦</span><span class="nav-label" data-v-0b425e15="">Installation</span></a><a href="/docs/transactions" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ”„</span><span class="nav-label" data-v-0b425e15="">Transactions &amp; Async</span></a><a href="/docs/crud" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">âœï¸</span><span class="nav-label" data-v-0b425e15="">CRUD Operations</span></a><a href="/docs/querying" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ”</span><span class="nav-label" data-v-0b425e15="">Querying</span></a><a href="/docs/generators" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ¤–</span><span class="nav-label" data-v-0b425e15="">Source Generators</span></a><a href="/docs/cdc" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ“¡</span><span class="nav-label" data-v-0b425e15="">Change Data Capture</span></a><a href="/docs/spatial" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸŒ</span><span class="nav-label" data-v-0b425e15="">Spatial Indexing</span></a><a href="/docs/architecture" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ—ï¸</span><span class="nav-label" data-v-0b425e15="">Architecture</span></a><a href="/docs/converters" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ†”</span><span class="nav-label" data-v-0b425e15="">Custom ID Converters</span></a><a href="/docs/benchmarks" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">âš¡</span><span class="nav-label" data-v-0b425e15="">Benchmarks</span></a><a href="/docs/dynamic-api" class="nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ”Œ</span><span class="nav-label" data-v-0b425e15="">Schema-less API</span></a><a aria-current="page" href="/docs/blql" class="router-link-active router-link-exact-active active nav-item" data-v-0b425e15=""><span class="nav-icon" data-v-0b425e15="">ğŸ”</span><span class="nav-label" data-v-0b425e15="">BLQL</span></a><!--]--></nav></aside><main class="docs-content" data-v-0b425e15=""><div class="container" data-v-0b425e15=""><div class="doc-page" data-v-0b425e15="" data-v-b540829e=""><h1 data-v-b540829e="">ğŸ” <span class="title-gradient" data-v-b540829e="">BLQL â€” BLite Query Language</span></h1><p class="lead" data-v-b540829e="">BLQL is the <strong data-v-b540829e="">BLite Query Language</strong> for schema-less scenarios. Inspired by MQL (MongoDB Query Language), it lets you filter, sort, project, and page <code data-v-b540829e="">BsonDocument</code> results from a <code data-v-b540829e="">DynamicCollection</code> using either a <strong data-v-b540829e="">JSON string</strong> or a <strong data-v-b540829e="">fluent C# API</strong> â€” no compile-time types required.</p><div class="info-box" data-v-b540829e=""><div class="info-header" data-v-b540829e="">ğŸ“Œ BLQL vs LINQ</div><table data-v-b540829e=""><thead data-v-b540829e=""><tr data-v-b540829e=""><th data-v-b540829e=""></th><th data-v-b540829e="">LINQ (<code data-v-b540829e="">DocumentDbContext</code>)</th><th data-v-b540829e="">BLQL (<code data-v-b540829e="">DynamicCollection</code>)</th></tr></thead><tbody data-v-b540829e=""><tr data-v-b540829e=""><td data-v-b540829e=""><strong data-v-b540829e="">Entry point</strong></td><td data-v-b540829e=""><code data-v-b540829e="">.AsQueryable()</code></td><td data-v-b540829e=""><code data-v-b540829e="">.Query()</code> / <code data-v-b540829e="">.Query(filterJson)</code></td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><strong data-v-b540829e="">Type safety</strong></td><td data-v-b540829e="">âœ… Compile-time</td><td data-v-b540829e="">Runtime <code data-v-b540829e="">BsonDocument</code></td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><strong data-v-b540829e="">JSON string queries</strong></td><td data-v-b540829e="">â€”</td><td data-v-b540829e="">âœ… MQL-style</td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><strong data-v-b540829e="">Fluent C# filter API</strong></td><td data-v-b540829e="">Lambda expressions</td><td data-v-b540829e=""><code data-v-b540829e="">BlqlFilter.*</code> factories</td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><strong data-v-b540829e="">Projection</strong></td><td data-v-b540829e="">LINQ <code data-v-b540829e="">Select</code></td><td data-v-b540829e=""><code data-v-b540829e="">BlqlProjection.Include/Exclude</code></td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><strong data-v-b540829e="">Injection protection</strong></td><td data-v-b540829e="">âœ… Type-safe</td><td data-v-b540829e="">âœ… Unknown <code data-v-b540829e="">$</code> operators rejected</td></tr></tbody></table></div><section data-v-b540829e=""><h2 data-v-b540829e="">Getting Started</h2><p data-v-b540829e="">Import the namespace and call <code data-v-b540829e="">.Query()</code> on any <code data-v-b540829e="">DynamicCollection</code>:</p><pre data-v-b540829e=""><code data-v-b540829e=""><span class="keyword" data-v-b540829e="">using</span> BLite.Core.Query.Blql;

<span class="keyword" data-v-b540829e="">using var</span> engine = <span class="keyword" data-v-b540829e="">new</span> <span class="type" data-v-b540829e="">BLiteEngine</span>(<span class="string" data-v-b540829e="">"data.db"</span>);
<span class="keyword" data-v-b540829e="">var</span> col = engine.GetOrCreateCollection(<span class="string" data-v-b540829e="">"users"</span>);

<span class="comment" data-v-b540829e="">// â”€â”€ Option A: JSON string (MQL-style) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="keyword" data-v-b540829e="">var</span> docs = col.Query(<span class="string" data-v-b540829e="">"""{ "status": "active", "age": { "$gt": 18 } }"""</span>)
              .Sort(<span class="string" data-v-b540829e="">"""{ "name": 1 }"""</span>)
              .Skip(<span class="number" data-v-b540829e="">0</span>).Take(<span class="number" data-v-b540829e="">20</span>)
              .ToList();

<span class="comment" data-v-b540829e="">// â”€â”€ Option B: Fluent C# API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="keyword" data-v-b540829e="">var</span> docs = col.Query()
              .Filter(<span class="type" data-v-b540829e="">BlqlFilter</span>.And(
                  <span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"active"</span>),
                  <span class="type" data-v-b540829e="">BlqlFilter</span>.Gt(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">18</span>)))
              .OrderBy(<span class="string" data-v-b540829e="">"name"</span>)
              .Project(<span class="type" data-v-b540829e="">BlqlProjection</span>.Include(<span class="string" data-v-b540829e="">"name"</span>, <span class="string" data-v-b540829e="">"email"</span>))
              .ToList();</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Filter Operators</h2><h3 data-v-b540829e="">Comparison</h3><pre data-v-b540829e=""><code data-v-b540829e=""><span class="comment" data-v-b540829e="">// JSON                               C# equivalent</span>
{ <span class="string" data-v-b540829e="">"age"</span>: <span class="number" data-v-b540829e="">30</span> }                         <span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">30</span>)
{ <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$ne"</span>:  <span class="number" data-v-b540829e="">30</span> } }            <span class="type" data-v-b540829e="">BlqlFilter</span>.Ne(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">30</span>)
{ <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$gt"</span>:  <span class="number" data-v-b540829e="">18</span> } }            <span class="type" data-v-b540829e="">BlqlFilter</span>.Gt(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">18</span>)
{ <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$gte"</span>: <span class="number" data-v-b540829e="">18</span> } }            <span class="type" data-v-b540829e="">BlqlFilter</span>.Gte(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">18</span>)
{ <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$lt"</span>:  <span class="number" data-v-b540829e="">65</span> } }            <span class="type" data-v-b540829e="">BlqlFilter</span>.Lt(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">65</span>)
{ <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$lte"</span>: <span class="number" data-v-b540829e="">65</span> } }            <span class="type" data-v-b540829e="">BlqlFilter</span>.Lte(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">65</span>)

<span class="comment" data-v-b540829e="">// Range: combine $gte + $lte in one object</span>
{ <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$gte"</span>: <span class="number" data-v-b540829e="">18</span>, <span class="string" data-v-b540829e="">"$lte"</span>: <span class="number" data-v-b540829e="">65</span> } }  <span class="type" data-v-b540829e="">BlqlFilter</span>.Between(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">18</span>, <span class="number" data-v-b540829e="">65</span>)</code></pre><h3 data-v-b540829e="">Set Operators</h3><pre data-v-b540829e=""><code data-v-b540829e="">{ <span class="string" data-v-b540829e="">"role"</span>: { <span class="string" data-v-b540829e="">"$in"</span>:  [<span class="string" data-v-b540829e="">"admin"</span>, <span class="string" data-v-b540829e="">"mod"</span>] } }   <span class="type" data-v-b540829e="">BlqlFilter</span>.In(<span class="string" data-v-b540829e="">"role"</span>, <span class="string" data-v-b540829e="">"admin"</span>, <span class="string" data-v-b540829e="">"mod"</span>)
{ <span class="string" data-v-b540829e="">"role"</span>: { <span class="string" data-v-b540829e="">"$nin"</span>: [<span class="string" data-v-b540829e="">"banned"</span>] } }        <span class="type" data-v-b540829e="">BlqlFilter</span>.Nin(<span class="string" data-v-b540829e="">"role"</span>, <span class="string" data-v-b540829e="">"banned"</span>)</code></pre><h3 data-v-b540829e="">Field Tests</h3><pre data-v-b540829e=""><code data-v-b540829e="">{ <span class="string" data-v-b540829e="">"email"</span>: { <span class="string" data-v-b540829e="">"$exists"</span>: <span class="literal" data-v-b540829e="">true</span>  } }       <span class="type" data-v-b540829e="">BlqlFilter</span>.Exists(<span class="string" data-v-b540829e="">"email"</span>)
{ <span class="string" data-v-b540829e="">"email"</span>: { <span class="string" data-v-b540829e="">"$exists"</span>: <span class="literal" data-v-b540829e="">false</span> } }       <span class="type" data-v-b540829e="">BlqlFilter</span>.Exists(<span class="string" data-v-b540829e="">"email"</span>, exists: <span class="literal" data-v-b540829e="">false</span>)
{ <span class="string" data-v-b540829e="">"email"</span>: <span class="literal" data-v-b540829e="">null</span> }                        <span class="type" data-v-b540829e="">BlqlFilter</span>.IsNull(<span class="string" data-v-b540829e="">"email"</span>)
{ <span class="string" data-v-b540829e="">"age"</span>:   { <span class="string" data-v-b540829e="">"$type"</span>: <span class="number" data-v-b540829e="">16</span> } }             <span class="type" data-v-b540829e="">BlqlFilter</span>.Type(<span class="string" data-v-b540829e="">"age"</span>, <span class="type" data-v-b540829e="">BsonType</span>.Int32)</code></pre><h3 data-v-b540829e="">Regex</h3><pre data-v-b540829e=""><code data-v-b540829e="">{ <span class="string" data-v-b540829e="">"name"</span>: { <span class="string" data-v-b540829e="">"$regex"</span>: <span class="string" data-v-b540829e="">"^Al"</span> } }         <span class="type" data-v-b540829e="">BlqlFilter</span>.Regex(<span class="string" data-v-b540829e="">"name"</span>, <span class="string" data-v-b540829e="">"^Al"</span>)</code></pre><div class="tip-box" data-v-b540829e=""><strong data-v-b540829e="">ğŸ›¡ï¸ ReDoS-safe</strong> â€” the JSON parser always compiles regex patterns with <code data-v-b540829e="">RegexOptions.NonBacktracking</code>, eliminating catastrophic backtracking.</div><h3 data-v-b540829e="">Logical Operators</h3><pre data-v-b540829e=""><code data-v-b540829e=""><span class="comment" data-v-b540829e="">// $and</span>
{ <span class="string" data-v-b540829e="">"$and"</span>: [ { <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$gt"</span>: <span class="number" data-v-b540829e="">18</span> } }, { <span class="string" data-v-b540829e="">"status"</span>: <span class="string" data-v-b540829e="">"active"</span> } ] }
<span class="type" data-v-b540829e="">BlqlFilter</span>.And(<span class="type" data-v-b540829e="">BlqlFilter</span>.Gt(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">18</span>), <span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"active"</span>))

<span class="comment" data-v-b540829e="">// $or</span>
{ <span class="string" data-v-b540829e="">"$or"</span>: [ { <span class="string" data-v-b540829e="">"role"</span>: <span class="string" data-v-b540829e="">"admin"</span> }, { <span class="string" data-v-b540829e="">"role"</span>: <span class="string" data-v-b540829e="">"superadmin"</span> } ] }
<span class="type" data-v-b540829e="">BlqlFilter</span>.Or(<span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"role"</span>, <span class="string" data-v-b540829e="">"admin"</span>), <span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"role"</span>, <span class="string" data-v-b540829e="">"superadmin"</span>))

<span class="comment" data-v-b540829e="">// $nor â€” negated OR</span>
{ <span class="string" data-v-b540829e="">"$nor"</span>: [ { <span class="string" data-v-b540829e="">"deleted"</span>: <span class="literal" data-v-b540829e="">true</span> } ] }
<span class="type" data-v-b540829e="">BlqlFilter</span>.Nor(<span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"deleted"</span>, <span class="literal" data-v-b540829e="">true</span>))

<span class="comment" data-v-b540829e="">// $not â€” wraps any filter</span>
{ <span class="string" data-v-b540829e="">"$not"</span>: { <span class="string" data-v-b540829e="">"status"</span>: <span class="string" data-v-b540829e="">"banned"</span> } }
<span class="type" data-v-b540829e="">BlqlFilter</span>.Not(<span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"banned"</span>))

<span class="comment" data-v-b540829e="">// Implicit AND â€” multiple top-level fields</span>
{ <span class="string" data-v-b540829e="">"status"</span>: <span class="string" data-v-b540829e="">"active"</span>, <span class="string" data-v-b540829e="">"age"</span>: { <span class="string" data-v-b540829e="">"$gt"</span>: <span class="number" data-v-b540829e="">18</span> } }</code></pre><h3 data-v-b540829e="">Fluent Combinators</h3><p data-v-b540829e="">Combine filters programmatically after construction:</p><pre data-v-b540829e=""><code data-v-b540829e=""><span class="keyword" data-v-b540829e="">var</span> f = <span class="type" data-v-b540829e="">BlqlFilter</span>.Gt(<span class="string" data-v-b540829e="">"age"</span>, <span class="number" data-v-b540829e="">18</span>)
               .AndAlso(<span class="type" data-v-b540829e="">BlqlFilter</span>.Eq(<span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"active"</span>))
               .AndAlso(<span class="type" data-v-b540829e="">BlqlFilter</span>.Exists(<span class="string" data-v-b540829e="">"email"</span>));</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Sort</h2><pre data-v-b540829e=""><code data-v-b540829e=""><span class="comment" data-v-b540829e="">// Single field â€” ascending</span>
col.Query(filter).OrderBy(<span class="string" data-v-b540829e="">"name"</span>).ToList();

<span class="comment" data-v-b540829e="">// Single field â€” descending</span>
col.Query(filter).OrderByDescending(<span class="string" data-v-b540829e="">"createdAt"</span>).ToList();

<span class="comment" data-v-b540829e="">// Multi-key JSON sort (1 = asc, -1 = desc)</span>
col.Query(filter).Sort(<span class="string" data-v-b540829e="">"""{ "lastName": 1, "age": -1 }"""</span>).ToList();

<span class="comment" data-v-b540829e="">// Programmatic multi-key</span>
col.Query(filter)
   .Sort(<span class="type" data-v-b540829e="">BlqlSort</span>.By(<span class="string" data-v-b540829e="">"lastName"</span>, <span class="type" data-v-b540829e="">SortDirection</span>.Ascending)
                .ThenBy(<span class="string" data-v-b540829e="">"age"</span>,       <span class="type" data-v-b540829e="">SortDirection</span>.Descending))
   .ToList();</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Projection</h2><pre data-v-b540829e=""><code data-v-b540829e=""><span class="comment" data-v-b540829e="">// Include only specific fields</span>
col.Query(filter)
   .Project(<span class="type" data-v-b540829e="">BlqlProjection</span>.Include(<span class="string" data-v-b540829e="">"name"</span>, <span class="string" data-v-b540829e="">"email"</span>, <span class="string" data-v-b540829e="">"createdAt"</span>))
   .ToList();

<span class="comment" data-v-b540829e="">// Exclude specific fields (return everything else)</span>
col.Query(filter)
   .Project(<span class="type" data-v-b540829e="">BlqlProjection</span>.Exclude(<span class="string" data-v-b540829e="">"password"</span>, <span class="string" data-v-b540829e="">"__internal"</span>))
   .ToList();

<span class="comment" data-v-b540829e="">// No projection â€” returns whole document (default)</span>
col.Query(filter).ToList();</code></pre><div class="tip-box" data-v-b540829e="">Field projections rebuild the <code data-v-b540829e="">BsonDocument</code> in a single pass using the engine's shared key map, so <strong data-v-b540829e="">field IDs are preserved exactly</strong> â€” no re-registration needed.</div></section><section data-v-b540829e=""><h2 data-v-b540829e="">Paging</h2><pre data-v-b540829e=""><code data-v-b540829e=""><span class="comment" data-v-b540829e="">// Offset-based paging</span>
<span class="keyword" data-v-b540829e="">int</span> pageSize = <span class="number" data-v-b540829e="">20</span>;
<span class="keyword" data-v-b540829e="">int</span> pageNo   = <span class="number" data-v-b540829e="">3</span>;   <span class="comment" data-v-b540829e="">// 1-based</span>

<span class="keyword" data-v-b540829e="">var</span> page = col.Query(filter)
              .OrderBy(<span class="string" data-v-b540829e="">"createdAt"</span>)
              .Skip((pageNo - <span class="number" data-v-b540829e="">1</span>) * pageSize)
              .Take(pageSize)     <span class="comment" data-v-b540829e="">// alias: .Limit(pageSize)</span>
              .ToList();</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Terminal Methods</h2><table data-v-b540829e=""><thead data-v-b540829e=""><tr data-v-b540829e=""><th data-v-b540829e="">Method</th><th data-v-b540829e="">Returns</th><th data-v-b540829e="">Description</th></tr></thead><tbody data-v-b540829e=""><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">ToList()</code></td><td data-v-b540829e=""><code data-v-b540829e="">List&lt;BsonDocument&gt;</code></td><td data-v-b540829e="">Materialise all results</td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">AsEnumerable()</code></td><td data-v-b540829e=""><code data-v-b540829e="">IEnumerable&lt;BsonDocument&gt;</code></td><td data-v-b540829e="">Lazy streaming</td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">AsAsyncEnumerable(ct)</code></td><td data-v-b540829e=""><code data-v-b540829e="">IAsyncEnumerable&lt;BsonDocument&gt;</code></td><td data-v-b540829e="">Async streaming with cancellation</td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">Count()</code></td><td data-v-b540829e=""><code data-v-b540829e="">int</code></td><td data-v-b540829e="">Count matching documents (ignores skip/take)</td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">FirstOrDefault()</code></td><td data-v-b540829e=""><code data-v-b540829e="">BsonDocument?</code></td><td data-v-b540829e="">First match or <code data-v-b540829e="">null</code></td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">First()</code></td><td data-v-b540829e=""><code data-v-b540829e="">BsonDocument</code></td><td data-v-b540829e="">First match or throws <code data-v-b540829e="">InvalidOperationException</code></td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">Any()</code></td><td data-v-b540829e=""><code data-v-b540829e="">bool</code></td><td data-v-b540829e="">Short-circuits on first match</td></tr><tr data-v-b540829e=""><td data-v-b540829e=""><code data-v-b540829e="">None()</code></td><td data-v-b540829e=""><code data-v-b540829e="">bool</code></td><td data-v-b540829e="">True if no document matches</td></tr></tbody></table><h3 data-v-b540829e="">Async Streaming</h3><pre data-v-b540829e=""><code data-v-b540829e=""><span class="keyword" data-v-b540829e="">await foreach</span> (<span class="keyword" data-v-b540829e="">var</span> doc <span class="keyword" data-v-b540829e="">in</span> col.Query(filter)
                                  .OrderBy(<span class="string" data-v-b540829e="">"createdAt"</span>)
                                  .AsAsyncEnumerable(ct))
{
    Process(doc);
}</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Creating Documents</h2><p data-v-b540829e="">Keys live at <strong data-v-b540829e="">database scope</strong> â€” <code data-v-b540829e="">BLiteEngine.CreateDocument</code> registers field names in the engine's shared key map and builds the <code data-v-b540829e="">BsonDocument</code> in a single call:</p><pre data-v-b540829e=""><code data-v-b540829e=""><span class="comment" data-v-b540829e="">// Keys registered on the engine, not the collection</span>
<span class="keyword" data-v-b540829e="">var</span> doc = engine.CreateDocument(
    [<span class="string" data-v-b540829e="">"name"</span>, <span class="string" data-v-b540829e="">"age"</span>, <span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"role"</span>],
    b =&gt; b.AddString(<span class="string" data-v-b540829e="">"name"</span>,   <span class="string" data-v-b540829e="">"Alice"</span>)
          .AddInt32(<span class="string" data-v-b540829e="">"age"</span>,    <span class="number" data-v-b540829e="">30</span>)
          .AddString(<span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"active"</span>)
          .AddString(<span class="string" data-v-b540829e="">"role"</span>,   <span class="string" data-v-b540829e="">"admin"</span>));

col.Insert(doc);
engine.Commit();</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Security â€” Injection Protection</h2><p data-v-b540829e="">The JSON filter parser is hardened against <strong data-v-b540829e="">BLQL-injection attacks</strong> (analogous to NoSQL injection):</p><table data-v-b540829e=""><thead data-v-b540829e=""><tr data-v-b540829e=""><th data-v-b540829e="">Attack vector</th><th data-v-b540829e="">Protection</th></tr></thead><tbody data-v-b540829e=""><tr data-v-b540829e=""><td data-v-b540829e="">Unknown <code data-v-b540829e="">$</code> operators at root (<code data-v-b540829e="">$where</code>, <code data-v-b540829e="">$expr</code>, <code data-v-b540829e="">$function</code>, â€¦)</td><td data-v-b540829e="">â†’ <code data-v-b540829e="">FormatException</code> â€” never silently passed through</td></tr><tr data-v-b540829e=""><td data-v-b540829e="">Unknown field-level operators (<code data-v-b540829e="">$lookup</code>, <code data-v-b540829e="">$match</code>, â€¦)</td><td data-v-b540829e="">â†’ <code data-v-b540829e="">FormatException</code></td></tr><tr data-v-b540829e=""><td data-v-b540829e="">Type confusion (<code data-v-b540829e="">"$exists": 1</code>, <code data-v-b540829e="">"$regex": 42</code>)</td><td data-v-b540829e="">â†’ <code data-v-b540829e="">FormatException</code></td></tr><tr data-v-b540829e=""><td data-v-b540829e="">ReDoS via <code data-v-b540829e="">$regex</code></td><td data-v-b540829e="">â†’ <code data-v-b540829e="">RegexOptions.NonBacktracking</code> eliminates catastrophic backtracking</td></tr><tr data-v-b540829e=""><td data-v-b540829e="">Deeply nested DoS (JSON depth &gt; 64)</td><td data-v-b540829e="">â†’ <code data-v-b540829e="">JsonReaderException</code> from <code data-v-b540829e="">System.Text.Json</code> before evaluation</td></tr></tbody></table><pre data-v-b540829e=""><code data-v-b540829e=""><span class="comment" data-v-b540829e="">// These all throw FormatException â€” they are never evaluated</span>
<span class="type" data-v-b540829e="">BlqlFilterParser</span>.Parse(<span class="string" data-v-b540829e="">"""{ "$where":    "this.age &gt; 0" }"""</span>);
<span class="type" data-v-b540829e="">BlqlFilterParser</span>.Parse(<span class="string" data-v-b540829e="">"""{ "$function": { "body": "return true;" } }"""</span>);
<span class="type" data-v-b540829e="">BlqlFilterParser</span>.Parse(<span class="string" data-v-b540829e="">"""{ "$expr":    { "$gt": ["$age", 0] } }"""</span>);
<span class="type" data-v-b540829e="">BlqlFilterParser</span>.Parse(<span class="string" data-v-b540829e="">"""{ "name": { "$exists": 1 } }"""</span>);</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Full Example</h2><pre data-v-b540829e=""><code data-v-b540829e=""><span class="keyword" data-v-b540829e="">using</span> BLite.Core.Query.Blql;

<span class="keyword" data-v-b540829e="">using var</span> engine = <span class="keyword" data-v-b540829e="">new</span> <span class="type" data-v-b540829e="">BLiteEngine</span>(<span class="string" data-v-b540829e="">"shop.db"</span>);
<span class="keyword" data-v-b540829e="">var</span> orders = engine.GetOrCreateCollection(<span class="string" data-v-b540829e="">"orders"</span>);

<span class="comment" data-v-b540829e="">// Insert some documents</span>
<span class="keyword" data-v-b540829e="">foreach</span> (<span class="keyword" data-v-b540829e="">var</span> status <span class="keyword" data-v-b540829e="">in</span> <span class="keyword" data-v-b540829e="">new</span>[] { <span class="string" data-v-b540829e="">"pending"</span>, <span class="string" data-v-b540829e="">"shipped"</span>, <span class="string" data-v-b540829e="">"pending"</span> })
{
    <span class="keyword" data-v-b540829e="">var</span> doc = engine.CreateDocument(
        [<span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"total"</span>, <span class="string" data-v-b540829e="">"currency"</span>],
        b =&gt; b.AddString(<span class="string" data-v-b540829e="">"status"</span>,   status)
              .AddDouble(<span class="string" data-v-b540829e="">"total"</span>,    <span class="number" data-v-b540829e="">199.99</span>)
              .AddString(<span class="string" data-v-b540829e="">"currency"</span>, <span class="string" data-v-b540829e="">"EUR"</span>));
    orders.Insert(doc);
}
engine.Commit();

<span class="comment" data-v-b540829e="">// Query with JSON string filter + sort + paging</span>
<span class="type" data-v-b540829e="">List</span>&lt;<span class="type" data-v-b540829e="">BsonDocument</span>&gt; page = orders
    .Query(<span class="string" data-v-b540829e="">"""{ "status": "pending", "total": { "$gte": 100 } }"""</span>)
    .Sort(<span class="string" data-v-b540829e="">"""{ "total": -1 }"""</span>)
    .Skip(<span class="number" data-v-b540829e="">0</span>).Take(<span class="number" data-v-b540829e="">10</span>)
    .Project(<span class="type" data-v-b540829e="">BlqlProjection</span>.Include(<span class="string" data-v-b540829e="">"status"</span>, <span class="string" data-v-b540829e="">"total"</span>))
    .ToList();

<span class="keyword" data-v-b540829e="">foreach</span> (<span class="keyword" data-v-b540829e="">var</span> doc <span class="keyword" data-v-b540829e="">in</span> page)
    Console.WriteLine(<span class="string" data-v-b540829e="">$"status={doc.GetString("status")} total={doc.GetDouble("total")}"</span>);

<span class="comment" data-v-b540829e="">// Aggregate</span>
<span class="keyword" data-v-b540829e="">int</span> pendingCount = orders.Query(<span class="string" data-v-b540829e="">"""{ "status": "pending" }"""</span>).Count();
Console.WriteLine(<span class="string" data-v-b540829e="">$"Pending orders: {pendingCount}"</span>);</code></pre></section><section data-v-b540829e=""><h2 data-v-b540829e="">Next Steps</h2><div class="next-links" data-v-b540829e=""><a href="/docs/dynamic-api" class="next-card" data-v-b540829e=""><span class="next-icon" data-v-b540829e="">ğŸ”Œ</span><div data-v-b540829e=""><h4 data-v-b540829e="">Schema-less API</h4><p data-v-b540829e="">Explore the full BLiteEngine and DynamicCollection surface</p></div></a><a href="/docs/querying" class="next-card" data-v-b540829e=""><span class="next-icon" data-v-b540829e="">ğŸ”</span><div data-v-b540829e=""><h4 data-v-b540829e="">LINQ Querying</h4><p data-v-b540829e="">Type-safe queries with IQueryable for DocumentDbContext</p></div></a></div></section></div></div></main></div></main><footer class="main-footer" data-v-fb6af8ee=""><div class="container footer-inner" data-v-fb6af8ee=""><div class="footer-col" data-v-fb6af8ee=""><p data-v-fb6af8ee="">Â© 2026 BLite Project. Open Source (MIT).</p><p class="tagline" data-v-fb6af8ee="">"Sky is Blite, no Clouds today."</p></div><div class="footer-col footer-downloads" data-v-fb6af8ee=""><p class="footer-dl-title" data-v-fb6af8ee="">â¬‡ Download BLite Studio v1.9.0</p><div class="footer-dl-links" data-v-fb6af8ee=""><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-win-x64.msi" data-v-fb6af8ee="">ğŸªŸ Windows MSI</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-win-x64-portable.zip" data-v-fb6af8ee="">ğŸªŸ Windows Portable</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/blite-studio_1.9.0_amd64.deb" data-v-fb6af8ee="">ğŸ§ Linux .deb</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-linux-x64.tar.gz" data-v-fb6af8ee="">ğŸ§ Linux tar.gz</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-osx-arm64.dmg" data-v-fb6af8ee="">ğŸ macOS Apple Silicon</a><a href="https://github.com/EntglDb/BLite/releases/download/studio-v1.9.0/BLite.Studio-1.9.0-osx-x64.dmg" data-v-fb6af8ee="">ğŸ macOS Intel</a></div></div></div></footer></div></div></body></html>